"use strict";$(function(){$("header").load("../../../server/header.html"),$("footer").load("../../../server/footer.html"),new Promise(function(e,n){$.ajax({type:"get",url:"../../../server/class.json",dataType:"json",success:function(n){var t=n[0].cont,s=n.map(function(n,t){return"<a href="+(t<=14?"./list.html":"")+">"+n.title+"</a>"}).join(""),a=t.map(function(n){var t=n.arr3.map(function(n){return"<a>"+n+"</a>"}).join("");return'<li class="clearfix">\n\t\t\t\t\t\t\t<h6><a>'+n.title1+'</a></h6>\n\t\t\t\t\t\t\t<div class="children">\n\t\t\t\t\t\t\t\t'+t+"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>"}).join(""),i='<div class="dhxq">'+n.map(function(n){return"<ul>"+a+"</ul>"}).join("")+"</div>";$(".daohang").append(s),$(".hot-category dd").append(i),$(".daohang a").mouseenter(function(){var n=$(this)[0].offsetLeft+60,t=$(this)[0].offsetTop;$(".dhxq ul").eq($(this).index()).css({display:"block",left:n+"px",top:t+"px"}).siblings().css("display","none")}),$(".hot-category dd").mouseleave(function(){$(".dhxq ul").css("display","none")}),e()}})}).then(function(n,t){$.ajax({type:"get",url:"../../../server/sy1.json",dataType:"json",success:function(n){new Slider1(n[0].slider).init()}})});var n=new Promise(function(s,n){$.ajax({type:"get",url:"../../../server/sy1.json",dataType:"json",success:function(n){var t=n[1].seaShop.map(function(n,t){return'\n                <li>\n                    <a>\n                        <span class="img-area fl">\n                            <img src='+n.src+'></span>\n                        <div class="h1 fl">\n                            <p class="txt">'+n.title+'</p>\n                            <p class="red">'+n.price+'</p>\n                            <p class="gray9">'+n.source+"</p>\n                        </div>\n                    </a>\n                </li>\n            "}).join("");$(".banner-goods .foot").html(t),s()}})}),t=new Promise(function(s,n){$.ajax({type:"get",url:"../../../server/sy1.json",dataType:"json",success:function(n){var t=n[2].hot.map(function(n,t){return'\n                    <li class="'+(0==t?"active":"")+'">\n                        <a>\n                            <div class="pic"><img src='+n.src+" alt="+n.title+'></div>\n                            <div class="tit nowrap">'+n.title+"</div>\n                        </a>\n                    </li>\n                "}).join("");$(".grid-side .hot-subjects ul").html(t),$(".hot-subjects ul > li").mouseenter(function(){$(this).addClass("active").siblings().removeClass("active")}),s()}})}),s=new Promise(function(t,n){$.ajax({type:"get",url:"../../../server/rank.php",dataType:"json",success:function(n){new Slider2(n,1e4).init(),t()}})}),a=new Promise(function(s,n){$.ajax({type:"get",url:"../../../server/sy1.json",dataType:"json",success:function(n){var t=n[3].src.map(function(n){return'<li class="ct-img"><a><img src='+n+"></a></li>"}).join("");$(".hot-sites ul").html(t),s()}})});function e(a,n){$.ajax({type:"get",url:"../../../server/list.php",data:"page="+a+"&type="+n,dataType:"json",success:function(n){var t,s;t=a,s=n.map(function(n){return'\n            <li class="clearfix" data-id='+n.id+'>\n                <div class="fl pic ct-img">\n                    <a><img src='+n.src+'></a>\n                </div>\n                <div class="infos">\n                    <div class="t">\n                        <a class="site gray6"\n                            target="_blank">'+n.sell+'</a>\n                        <i class="join">|</i>\n                        <span class="tags">\n                            <a  target="_blank">'+n.info+'</a>\n                    </div>\n                    <div class="tit">\n                        <h6><a target="_blank">'+n.title+'</a></h6>\n                        <span class="red price">\n                            ¥<i class="num">'+n.price+'</i>\n                        </span>\n                    </div>\n                    <div class="desc">'+n.desc+'<a href="//www.meidebi.com/g-3194409.html"\n                            target="_blank">阅读全文</a></div>\n                    <div class="foot clearfix">\n                        <a  class="fr m-button button-primary" target="_blank" rel="nofollow">直达链接</a>\n                        <span class="links">\n                            <i class="f-icon icon-votesp" data-action="vote"\n                                data-options="async:true,data:{id:3194409}">'+n.nice+'</i>\n                            <i class="f-icon icon-votesm" data-action="vote"\n                                data-options="async:true,data:{id:3194409}">0</i>\n                            <a target="_blank"    rel="nofollow" class="comment">\n                                <span class="comment"><i\n                                        class="f-icon icon-comment">0</i></span></a>\n                            <i class="f-icon icon-fav" data-action="favorite"\n                                data-options="async:true,data:{id:3194409}">0</i>\n                        </span>\n                        <span>爆料人：<a target="_blank">语过添情</a></span>\n                        <span class="createtime">'+n.time+"</span>\n                    </div>\n                </div>\n            </li>\n            "}).join(""),$(".share-list>ul").html(s),$("#page a").eq(t-1).addClass("current").siblings().removeClass("current")}})}Promise.all([n,t,s,a]).then(function(){var i="default";$.ajax({type:"get",url:"../../../server/getPage.php",dataType:"json",success:function(n){for(var t=n.count,s="",a=0;a<t;a++)s+='<a class="num">'+(a+1)+"</a>";$("#page").html(s),e(1,i)}}),$("#page").on("click","a",function(){var n=$(this).index();console.log(n),e(n+1,i)}),$(".share-list ul").on("click",".m-button",function(){var n=$($(this).parent().parent().parent()).data("id");window.location.href="./detail.html?id="+n})}),$(window).scroll(function(){var n=$(".side-box").eq(1);500<$(window).scrollTop()?(n.css({position:"fixed",top:0,"margin-top":"0"}),1800<$(window).scrollTop()&&n.css({position:"static","margin-top":"1200px"})):n.css({position:"static"})}),$(function(){var n=document.querySelector(".m-nav"),t=n.offsetTop;window.onscroll=function(){window.scrollY>=t?n.classList.add("fix"):n.classList.remove("fix"),1e3<window.scrollY?$(".goTop").css("display","block"):$(".goTop").css("display","none")}}),$(".goTop").click(function(){$("html,body").animate({scrollTop:"0"},500)})});
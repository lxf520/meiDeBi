"use strict"; $(function () { $("header").load("../../../server/header.html"), $("footer").load("../../../server/footer.html"); var e = "default"; $.ajax({ type: "get", url: "../../../server/getPage.php", dataType: "json", success: function (t) { for (var n = t.count, a = "", i = 0; i < n; i++)a += '<a class="num">' + (i + 1) + "</a>"; var s = '\n            <span id="prev" class="prev nj-icon nj-icon-left"  >上一页</span>\n            ' + a + '\n            <span id="next" class="next nj-icon nj-icon-right" >下一页</span>'; $("#page").html(s), c(1, e) } }); var n = 1; function c(i, t) { $.ajax({ type: "get", url: "../../../server/list.php", data: "page=" + i + "&type=" + t, dataType: "json", success: function (t) { var n, a; n = i, a = t.map(function (t) { return '\n            <li data-id="' + t.id + '">\n\t\t\t\t<a class="inner" target="_blank">\n\t\t\t\t\t<div class="ct-img">\n\t\t\t\t\t\t<span>\n                            <img src=' + t.src + '>\n                        </span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tit f14">' + t.title + '</div>\n\t\t\t\t\t<div class="price">\n\t\t\t\t\t\t<span class="red f14">¥<i class="num">' + t.price + '</i></span>\n\t\t\t\t\t\t<span class="old">¥' + t.price + '</span> </div>\n\t\t\t\t</a>\n\t\t\t\t<div class="foot clearfix">\n\t\t\t\t\t<a href="//www.meidebi.com/company/2.html" class="gray9 fr site" target="_blank">' + t.sell + '</a>\n\t\t\t\t\t<span class="fl">\n\t\t\t\t\t\t<i class="f-icon icon-votesp">' + t.nice + '</i>\n\t\t\t\t\t\t<a href="//www.meidebi.com/g-3204922.html#comment" target="_blank" rel="nofollow"\n\t\t\t\t\t\t\tclass="f-icon icon-comment">0</a>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<a id="directlink" \n\t\t\t\t\tclass="go m-button button-primary" target="_blank" rel="nofollow">直达链接</a>\n\t\t\t</li>\n            ' }).join(""), $(".share-list-grid ul").html(a), $("#page").children("a").eq(n - 1).addClass("current").siblings().removeClass("current") } }) } $("#page").on("click", "a", function () { var t = $(this).index(); c(n = t, e) }), $("#page").on("click", "span", function (t) { "next" == t.target.id ? (c(n + 1, e), n++) : "prev" == t.target.id && (c(n - 1, e), n--) }), $("#items").on("click", "a", function () { e = $(this).data("type"), $(this).addClass("active").siblings().removeClass("active"), c(1, e) }), $.ajax({ type: "get", url: "../../../server/sy1.json", dataType: "json", success: function (t) { var n = t[3].src.map(function (t) { return '<li class="ct-img"><a><img src=' + t + "></a></li>" }).join(""); $(".hot-sites ul").html(n), new Slider3(t[4].baicai, $(".side-baicai nj-scroll")).init(); var a = t[5].热门商品.map(function (t) { return '<li class="clearfix">\n                <a>\n                    <div class="pic fl"><img\n                            src= ' + t.src + '></div>\n                    <div class="txt">\n                        <div class="tit gray3">' + t.title + '</div>\n                        <div class="price red"> ¥<i class="num">' + t.price + '</i></div>\n                        <div class="gray9">' + t.from + "</div>\n                    </div>\n                </a>\n            </li>" }); $(".hot-actives").html(a) } }), $(".share-list-grid ul").on("click", "li", function () { var t = $(this).data("id"); window.location.href = "./detail.html?id=" + t }), window.onload = function () { var t = document.querySelector(".m-nav"), n = t.offsetTop; window.onscroll = function () { window.scrollY >= n ? t.classList.add("fix") : t.classList.remove("fix") } } });
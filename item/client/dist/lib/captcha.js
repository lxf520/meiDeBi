"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var i=0,a=Array(t.length);i<t.length;i++)a[i]=t[i];return a}return Array.from(t)}function Captcha(){var i=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=Object.assign({lineWidth:.5,lineNum:2,dotR:1,dotNum:15,preGroundColor:[10,80],backGroundColor:[150,250],fontSize:20,fontFamily:["Georgia","微软雅黑","Helvetica","Arial"],fontStyle:"fill",content:"acdefhijkmnpwxyABCDEFGHJKMNPQWXY12345789",length:4},t);Object.keys(a).forEach(function(t){i[t]=a[t]}),this.canvas=null,this.paint=null}Captcha.prototype.getRandom=function(){for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];return i.sort(function(t,i){return t-i}),Math.floor(Math.random()*(i[1]-i[0])+i[0])},Captcha.prototype.getColor=function(i){var a=this,t=new Array(3).fill("");return t=t.map(function(t){return a.getRandom.apply(a,_toConsumableArray(i))})},Captcha.prototype.getText=function(){for(var t=this.content.length,i="",a=0;a<this.length;a++)i+=this.content[this.getRandom(0,t)];return i},Captcha.prototype.line=function(){for(var t=0;t<this.lineNum;t++){var i=this.getRandom(0,this.canvas.width),a=this.getRandom(0,this.canvas.height),n=this.getRandom(0,this.canvas.width),h=this.getRandom(0,this.canvas.height);this.paint.beginPath(),this.paint.lineWidth=this.lineWidth;var e=this.getColor(this.preGroundColor);this.paint.strokeStyle="rgba("+e[0]+","+e[1]+","+e[2]+",0.8)",this.paint.moveTo(i,a),this.paint.lineTo(n,h),this.paint.closePath(),this.paint.stroke()}},Captcha.prototype.circle=function(){for(var t=0;t<this.dotNum;t++){var i=this.getRandom(0,this.canvas.width),a=this.getRandom(0,this.canvas.height);this.paint.beginPath(),this.paint.arc(i,a,this.dotR,0,2*Math.PI,!1),this.paint.closePath();var n=this.getColor(this.preGroundColor);this.paint.fillStyle="rgba("+n[0]+","+n[1]+","+n[2]+",0.8)",this.paint.fill()}},Captcha.prototype.font=function(){var t=this.getText();this.callback(t),this.paint.font=this.fontSize+"px "+this.fontFamily[this.getRandom(0,this.fontFamily.length)],this.paint.textBaseline="middle";for(var i=this.fontStyle+"Text",a=this.fontStyle+"Style",n=0;n<this.length;n++){var h=this.paint.measureText(t[n]).width,e=this.getRandom(this.canvas.width/this.length*n+.2*h,this.canvas.width/this.length*n+.5*h),o=this.getRandom(-6,6),s=this.getColor(this.preGroundColor);this.paint[a]="rgba("+s[0]+","+s[1]+","+s[2]+",0.8)",this.paint.save(),this.paint.rotate(o*Math.PI/180),this.paint[i](t[n],e,this.canvas.height/2),this.paint.restore()}},Captcha.prototype.draw=function(t){var i=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};if(!this.paint){if(this.canvas=t,!this.canvas)return;this.paint=this.canvas.getContext("2d"),this.callback=a,this.canvas.onclick=function(){i.drawAgain()}}var n=this.getColor(this.backGroundColor);this.paint.fillStyle="rgba("+n[0]+","+n[1]+","+n[2]+",0.8)",this.paint.fillRect(0,0,this.canvas.width,this.canvas.height),this.circle(),this.line(),this.font()},Captcha.prototype.clear=function(){this.paint.clearRect(0,0,this.canvas.width,this.canvas.height)},Captcha.prototype.drawAgain=function(){this.clear(),this.draw(this.callbak)},"undefined"!=typeof module&&!module.nodeType&&module.exports&&(module.exports=Captcha);var obj={name:"zs"};